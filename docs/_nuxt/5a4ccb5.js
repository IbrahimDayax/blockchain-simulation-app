(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{367:function(t,e,n){"use strict";n.r(e);var l=n(6),o=(n(49),n(63),n(14),n(34),n(217),n(50),n(62)),c=n(148),r=n(216),d=n.n(r),v=n(304),x=n.n(v),f=n(305),m=n.n(f),_=n(309),h=n.n(_),C=Object(o.c)({props:{blockchain:{type:Object,required:!0},wallets:{type:Array,required:!0}},setup:function(t,e){e.emit;var n=Object(o.j)(),r=n.$sleep,v=n.$t,f=t.blockchain,_=t.wallets,C=Object(o.a)((function(){return f.pendingTransactions})),y=Object(o.h)(!1),w=Object(o.h)(!1),k=Object(o.g)({hash:"...",nonce:"...",timestamp:"...",elapsedTime:"...",payload:[]}),$=function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelector(".panel-pending-transaction").setAttribute("mining","0"),w.value=!0,y.value=!0,console.clear(),t.next=6,r(1e3);case 6:O().finally((function(){y.value=!1,document.querySelector(".panel-pending-transaction").setAttribute("mining","1")}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(l.a)(regeneratorRuntime.mark((function t(){var e,n,l,o,c,v,C,time;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=_[0].publicKey,x.a.add("[Blockchain] Starting mining with miner ".concat(e)),f.addTransaction(new m.a(f.system.publicKey,e,f.blockMineReward).sign(f.system.privateKey)),(n=new h.a(f.pendingTransactions,d()().toDate())).previousHash=f.getLastBlock().hash,k.payload=JSON.stringify(n.data),l=Date.now(),o=f.blockProofOfWorkDifficulty;case 8:if(n.hash.slice(0,o)==="0".repeat(o)){t.next=23;break}return t.next=11,r(5);case 11:c=Date.now(),n.nonce++,n.timestamp=d()().unix(),n.hash=n.calculateHash(),v=Math.floor((c-l)/1e3),console.log("[Block] Mining Block - generate hash and found ".concat(n.hash," | ").concat(v,"s | nonce ").concat(n.nonce)),k.nonce=n.nonce,k.hash=n.hash,k.timestamp=n.timestamp,k.elapsedTime=v,t.next=8;break;case 23:return C=Date.now(),time=(C-l)/1e3,console.log("[Block] Mining Block - Success in ".concat(time,"s with nonce ").concat(n.nonce)),x.a.add("[Block] Mining Block - Success in ".concat(time,"s with nonce ").concat(n.nonce)),f.chain.push(n),f.pendingTransactions=[],x.a.add("[Blockchain] Mining complete"),t.next=32,r(1e3);case 32:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{openDialog:function(){var t=new c.a.Tour({useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0},classes:"shepherd-theme-square"}});t.addStep({title:v("components.pending.dialog.title"),text:v("components.pending.dialog.text"),buttons:[{text:v("components.pending.dialog.prev"),classes:"shepherd-button-secondary",action:function(){return this.hide()}},{text:v("components.pending.dialog.next"),action:function(){return setTimeout((function(){return $()}),500),this.hide()}}]}),t.start()},startMining:$,pendingTransactions:C,loading:y,visualizer:k,showVisualizer:w}}}),y=C,w=n(61),component=Object(w.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative"},[t.showVisualizer?n("div",{staticClass:"panel-visualizer-mining rounded pt-4 overflow-hidden flex flex-col mb-4 bg-gray-50"},[n("div",{staticClass:"px-4 flex flex-col justify-between"},[n("div",{staticClass:"text-2xl font-semibold"},[t._v("\n        "+t._s(t.$t("components.pending.visualizer.title"))+"\n        "),t.loading?n("span",{staticClass:"text-xs"},[t._v("Running...")]):n("span",{staticClass:"text-xs"},[t._v("Finished...")])]),t._v(" "),n("div",{staticClass:"py-4 flex flex-col lg:flex-row"},[n("div",{staticClass:"blocks transition-all duration-300 relative flex flex-row"},[n("div",{staticClass:"\n              transition-all duration-300 cursor-pointer\n              block-chain relative rounded border-2 border-gray-500\n              hover:border-blue-500\n            "},[n("div",{staticClass:"title py-2 px-3 font-semibold border-b border-gray-500"},[t._v("\n              "+t._s(t.$t("components.pending.visualizer.newBlockCandidate"))+"\n            ")]),t._v(" "),n("div",{staticClass:"text-sm p-2 border-b border-gray-500"},[n("div",{staticClass:"mb-2"},[n("div",{staticClass:"font-semibold"},[t._v(t._s(t.$t("components.blocks.block.previousBlockHash")))]),t._v(" "),n("div",{staticClass:"text-purple-600"},[n("span",{staticClass:"break-words"},[t._v("\n                    "+t._s(t.blockchain.getLastBlock().previousHash)+"\n                  ")])])]),t._v(" "),n("div",{staticClass:"mb-2"},[n("div",{staticClass:"font-semibold"},[t._v(t._s(t.$t("components.blocks.block.hash")))]),t._v(" "),n("div",{staticClass:"text-pink-600"},[n("span",{staticClass:"break-words"},[t._v("\n                    "+t._s(t.visualizer.hash)+"\n                  ")])])])]),t._v(" "),n("div",{staticClass:"text-sm p-2"},[n("div",{},[n("div",{staticClass:"font-semibold"},[t._v(t._s(t.$t("components.blocks.block.nonce")))]),t._v(" "),n("div",{staticClass:"text-pink-600"},[n("span",{staticClass:"break-words"},[t._v("\n                    "+t._s(t.visualizer.nonce)+"\n                  ")])])])])])]),t._v(" "),n("div",{staticClass:"flex-1 flex py-4 pr-8"},[n("table",{staticClass:"md:table flex-1 text-xs"},[n("tr",{staticClass:"flex flex-col md:flex-row md:space-x-4 mb-2"},[n("th",{staticClass:"md:w-2/12 text-left md:text-right"},[t._v("\n                "+t._s(t.$t("components.pending.visualizer.powDifficulty"))+"\n              ")]),t._v(" "),n("td",{staticClass:"md:w-10/12 text-left"},[t._v("\n                "+t._s(t.blockchain.blockProofOfWorkDifficulty)+"\n                (\n                  "),t._l(parseInt(t.blockchain.blockProofOfWorkDifficulty),(function(i){return n("span",{key:i,staticClass:"text-red-500"},[t._v("0")])})),n("span",{staticClass:"text-purple-500"},[t._v("RANDOMHASH")]),t._v("\n                )\n              ")],2)]),t._v(" "),n("tr",{staticClass:"flex flex-col md:flex-row md:space-x-4 mb-2"},[n("th",{staticClass:"md:w-2/12 text-left md:text-right"},[t._v("\n                "+t._s(t.$t("components.pending.visualizer.hashRules"))+"\n              ")]),t._v(" "),t._m(0)]),t._v(" "),n("tr",{staticClass:"flex flex-col md:flex-row md:space-x-4 mb-2"},[n("th",{staticClass:"md:w-2/12 text-left md:text-right"},[t._v("\n                "+t._s(t.$t("components.pending.visualizer.timeElapsed"))+"\n              ")]),t._v(" "),n("td",{staticClass:"md:w-10/12 text-left"},[t._v(t._s(t.visualizer.elapsedTime)+"s")])]),t._v(" "),n("tr",{staticClass:"flex flex-col md:flex-row md:space-x-4 mb-2"},[n("th",{staticClass:"md:w-2/12 text-left md:text-right"},[t._v("\n                Payload\n              ")]),t._v(" "),n("td",{staticClass:"md:w-10/12 text-left"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.visualizer.payload,expression:"visualizer.payload"}],staticClass:"\n                    w-full px-4 py-2\n                    border-2 border-purple-500\n                  ",attrs:{readonly:"",disabled:"true",rows:"10"},domProps:{value:t.visualizer.payload},on:{input:function(e){e.target.composing||t.$set(t.visualizer,"payload",e.target.value)}}})])])])])])])]):t._e(),t._v(" "),n("div",{staticClass:"panel-pending-transaction relative rounded pt-4 overflow-hidden flex flex-col bg-gray-50"},[n("div",{staticClass:"px-4 flex flex-col justify-between"},[n("div",{staticClass:"text-2xl font-semibold"},[t._v("\n        "+t._s(t.$t("components.pending.title"))+"\n      ")]),t._v(" "),n("div",{staticClass:"pt-1 text-xs text-gray-500"},[t._v("\n        "+t._s(t.$t("components.pending.description"))+"\n      ")]),t._v(" "),t.loading?t._e():n("div",{staticClass:"relative py-4 flex flex-col"},[0===t.pendingTransactions.length?n("div",[t._v("\n          "+t._s(t.$t("components.pending.noTransactions"))+"\n        ")]):t._e(),t._v(" "),t._l(t.pendingTransactions,(function(e,i){return n("div",{key:i,staticClass:"\n            rounded\n            text-gray-700 bg-gray-100 hover:bg-gray-200\n            px-4 py-2\n            flex flex-col md:flex-row space-x-4\n            mb-2\n            overflow-x-hidden\n          "},[n("div",{staticClass:"w-1/12 text-3xl text-center self-center text-blue-500"},[t._v("\n            "+t._s(i+1)+"\n          ")]),t._v(" "),n("div",{staticClass:"w-10/12 flex flex-col"},[n("div",{staticClass:"flex"},[n("div",{staticClass:"truncate font-semibold"},[t._v("\n                "+t._s(t.$t("other.from"))+" :\n                "),e.fromAddress===t.blockchain.system.publicKey?n("span",{staticClass:"text-blue-500"},[t._v("\n                  System\n                ")]):n("span",{staticClass:"text-gray-500"},[t._v("\n                  "+t._s(e.fromAddress)+"\n                ")])])]),t._v(" "),n("div",{staticClass:"flex"},[n("div",{staticClass:"truncate font-semibold"},[t._v("\n                "+t._s(t.$t("other.to"))+" :\n                "),n("span",{staticClass:"text-gray-500"},[t._v(t._s(e.toAddress))])])]),t._v(" "),n("div",{staticClass:"flex"},[n("div",{staticClass:"truncate font-semibold"},[t._v("\n                "+t._s(t.$t("other.amount"))+" :\n                "),n("span",{staticClass:"text-gray-500"},[t._v(t._s(e.amount)+" Coin")])])])]),t._v(" "),n("div",{staticClass:"w-1/12 text-3xl text-center self-center text-gray-400"},[n("font-awesome-icon",{staticClass:"text-gray-300",attrs:{icon:["fas","clock"]}})],1)])})),t._v(" "),0!==t.pendingTransactions.length?n("Button",{attrs:{text:t.$t("components.pending.startMining")},nativeOn:{click:function(e){return t.openDialog.apply(null,arguments)}}}):t._e()],2)]),t._v(" "),t.loading?n("div",{staticClass:"z-10 absolute top-0 left-0 w-full h-full bg-black text-gray-100 flex flex-col text-center justify-center"},[n("div",{staticClass:"text-center"},[n("font-awesome-icon",{attrs:{icon:["fas","circle-notch"],spin:""}})],1),t._v(" "),n("div",[t._v("\n        "+t._s(t.$t("components.pending.miningInProgress"))+"\n        "),n("div",{staticClass:"text-xs"},[t._v("\n          "+t._s(t.$t("components.pending.noteInProgress"))+"\n        ")])])]):t._e()])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",{staticClass:"md:w-10/12 text-left"},[n("span",{staticClass:"text-red-500"},[t._v("SHA256(")]),t._v(" "),n("span",{staticClass:"text-green-500"},[t._v("previousHash")]),t._v(" +\n                  "),n("span",{staticClass:"text-green-500"},[t._v("timestamp")]),t._v(" +\n                  "),n("span",{staticClass:"text-green-500"},[t._v("payload")]),t._v(" +\n                  "),n("span",{staticClass:"text-green-500"},[t._v("nonce")]),t._v(" "),n("span",{staticClass:"text-red-500"},[t._v(")")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:n(302).default})}}]);